<!DOCTYPE html><html class="default" lang="en" data-base="./"><head><meta charset="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>hono-compress</title><meta name="description" content="Documentation for hono-compress"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="assets/style.css"/><link rel="stylesheet" href="assets/highlight.css"/><script defer src="assets/main.js"></script><script async src="assets/icons.js" id="tsd-icons-script"></script><script async src="assets/search.js" id="tsd-search-script"></script><script async src="assets/navigation.js" id="tsd-nav-script"></script><style type="text/css">
/* typedoc-theme-fresh */

/* @view-transition {
  navigation: auto;
} */

:root {
  --light-color-background: #fafafe;
  --light-color-background-active: #eaeced;
  --light-color-text: #222222;
  --light-color-text-aside: #5e5e5e;

  --dark-color-background: #1a1a1c;
  --dark-color-background-active: #2f2f2b;
  --dark-color-text: #dfdfd6;
  --dark-color-text-aside: #b0b0b0;

  --dim-header-height: 2.5rem;
  --dim-footer-height: 0px;

  --light-code-background: #ffffff18;
  --dark-code-background: #00000018;
}

body {
  padding: 0;
  margin: 0;
  & > .container.container-main {
    margin: 0 auto;
    margin-top: var(--dim-header-height);
    --dim-container-main-margin-y: 0px;
  }
}

@media (prefers-color-scheme: light) {
  ::selection {
    background-color: #11111a20;
  }
}

@media (prefers-color-scheme: dark) {
  ::selection {
    background-color: #bbbbff48;
  }
}

:root[data-theme="light"] {
  ::selection {
    background-color: #11111a20;
  }
}

:root[data-theme="dark"] {
  ::selection {
    background-color: #bbbbff48;
  }
}

h1, h2, h3, h4, h5, h6 {
  font-weight: 500;
}

.tsd-page-toolbar {
  position: fixed;
  background: linear-gradient(
    to bottom,
    color-mix(in srgb, var(--color-background) 80%, transparent) 60%,
    transparent
  );
  backdrop-filter: blur(2px);
  border-bottom: none;

  .title {
    font-weight: 500;
    font-size: 18px;
    white-space: nowrap;
    text-overflow: ellipsis;
    overflow: hidden;
    min-width: 0;
    margin-right: auto;

    &:hover {
      color: var(--color-contrast-text);
      text-decoration: none;
    }
  }

  .tsd-theme-toggle {
    display: flex;
    position: relative;
    margin-right: 12px;
    color: var(--color-text-aside);
    
    select {
      cursor: pointer;
      border: 1px solid var(--color-background-active);
      border-radius: 4px;
      padding: 6px 8px;
      padding-left: 32px;  /* Space for the icon */
      font-size: 14px;
      background: transparent;
      transition: background-color 200ms;
      color: var(--color-text-aside);
      
      /* for Firefox and Chrome: these are inconsistent */
      -moz-appearance: none;
      -webkit-appearance: none;
      
      &:hover {
        background-color: var(--color-background-active);
      }
    }
  }
}

.tsd-widget {
  display: flex;
  align-items: center;
  height: auto;
  width: auto;
  padding: 4px;
  font-size: 14px;
  border-radius: 4px;
  transition: background-color 200ms;
  color: var(--color-text-aside);
  opacity: 100%;

  &:hover {
    background-color: var(--color-background-active);
  }
}

#tsd-search-results {
  & > li {
    padding-inline: 6px;
    transition: background-color 200ms;
  }

  a:hover {
    text-decoration: none;
  }
}

.col-content {
  overflow: hidden;
  padding-block: 24px;

  & > .tsd-typography {
    padding-bottom: 24px;
  }
}

.col-sidebar {
  top: var(--dim-header-height);  /* Relevant for tablet layout. */
}

.site-menu {
  top: var(--dim-header-height);
  padding-block: 24px;
  box-sizing: border-box;
}

.page-menu {
  top: var(--dim-header-height);
  padding-block: 48px 24px;
  box-sizing: border-box;
}

.tsd-navigation,
.tsd-page-navigation {
  > details {
    margin-bottom: 8px;
  }

  a {
    border-radius: 4px;
    padding-inline: 6px;
    margin-bottom: 2px;
  }
  a:hover {
    text-decoration: none;
    background-color: var(--color-background-active);
  }
  a.current {
    background-color: var(--color-background-active);
    span {
      color: var(--color-contrast-text);
    }
  }
}

.tsd-navigation {
  & > a {
    /* Top-level navigation anchor. */
    margin-block: 16px;
    font-size: 18px;
    background: transparent !important;
    padding: 0;
    
    &:hover {
      color: var(--color-contrast-text);
    }
  }
}

.tsd-page-navigation {
  border-left: 1px solid var(--color-background-active);
  padding-left: 4px;
  padding-block: 4px;
}

.tsd-page-navigation-section {
  & > summary > svg {
    margin-right: 0;
  }
  & > div {
    margin-left: 24px;
  }
}

.tsd-page-title {
  color: var(--color-contrast-text);
}

h1 > code.tsd-tag {
  margin-left: 12px;
}

code.tsd-tag {
  display: inline-block;
  transform: translateY(-0.1em);
  background: var(--color-background-secondary);
  border: 0;
  border-radius: 8px;
  padding: 2px 4px;
}

.tsd-breadcrumb {
  margin-bottom: 12px;
  li:after {
    content: " › ";
    opacity: 0.4;
  }
  li:last-of-type::after {
    content: "";
  }
}

.tsd-signature,
.tsd-signatures .tsd-signature {
  border: 0;
  border-radius: 8px;
  background: var(--color-background-secondary);
  font-weight: 500;
  padding: 10px 8px;
  line-height: 1.3;
}

.tsd-anchor-icon {
  color: var(--color-text-aside);
  padding-bottom: 1px;
}

.tsd-kind-icon {
  filter: grayscale(0.5) opacity(0.8);
}

/* Accordion icon */
.tsd-accordion-summary > svg {
  color: var(--color-text-aside);
  opacity: 50%;
  stroke-width: 1px;
  transition: transform 200ms ease-in-out;
}

.tsd-accordion-summary > svg:has(+ h2) {
  height: 24px;
  width: 24px;
}

/* Desktop sizing */
@media (min-width: 1200px) {
  .container-main {
    grid-template-columns: minmax(0, 1.1fr) minmax(0, 2.5fr) minmax(0, 17rem);
  }

  .site-menu {
    padding-right: 8px;
  }
  .page-menu {
    padding-left: 24px;
  }

  .tsd-widget.menu {
    display: none;
  }
}

/* Tablet sizing */
@media (min-width: 770px) and (max-width: 1199px) {
  .page-menu {
    padding-block: 24px 24px;
  }
  .site-menu {
    padding-block: 0 24px;
    margin-top: 0;
  }

  .tsd-widget.menu {
    display: none;
  }

  .lg-show {
    display: none !important;
  }
}

/* Mobile sizing */
@media (max-width: 769px) {
  .page-menu {
    display: none;
  }
  .site-menu {
    padding: 0;
  }

  .container {
    padding: 0 1rem;
  }

  .has-menu .col-sidebar {
    padding: 0 1rem;
    max-height: 100dvh;
  }

  .lg-show {
    display: none !important;
  }
  .md-show {
    display: none !important;
  }
}
</style></head><body><script>document.documentElement.dataset.theme = localStorage.getItem("tsd-theme") || "os";document.body.style.display="none";setTimeout(() => window.app?app.showPage():document.body.style.removeProperty("display"),500)</script><header class="tsd-page-toolbar"><div class="tsd-toolbar-contents container"><a href="index.html" class="title">hono-compress</a><div id="tsd-toolbar-links"></div><div class="tsd-theme-toggle md-show" style="position: relative"><div style="position: absolute; left: 8px; top: 4px; pointer-events: none"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-sun-moon-icon lucide-sun-moon"><path d="M12 2v2"></path><path d="M14.837 16.385a6 6 0 1 1-7.223-7.222c.624-.147.97.66.715 1.248a4 4 0 0 0 5.26 5.259c.589-.255 1.396.09 1.248.715"></path><path d="M16 12a4 4 0 0 0-4-4"></path><path d="m19 5-1.256 1.256"></path><path d="M20 12h2"></path></svg></div><select id="tsd-theme"><option value="os">System</option><option value="light">Light</option><option value="dark">Dark</option></select></div><button id="tsd-search-trigger" class="tsd-widget" aria-label="Search" style="
              border: 1px solid var(--color-background-active);
              border-radius: 4px;
              margin-left: 8px;
            "><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-search-icon lucide-search" style="margin-bottom: 1px; margin-left: 4px; margin-right: 4px;"><path d="m21 21-4.34-4.34"></path><circle cx="11" cy="11" r="8"></circle></svg><span class="lg-show" style="margin-left: 4px; margin-right: 12ch;">Search…</span></button><dialog id="tsd-search" aria-label="Search"><input role="combobox" id="tsd-search-input" aria-controls="tsd-search-results" aria-autocomplete="list" aria-expanded="true" autocapitalize="off" autocomplete="off" placeholder="Search the docs" maxLength="100"/><ul role="listbox" id="tsd-search-results"></ul><div id="tsd-search-status" aria-live="polite" aria-atomic="true"><div>Preparing search index...</div></div></dialog><a href="#" class="tsd-widget menu" id="tsd-toolbar-menu-trigger" data-toggle="menu" aria-label="Menu" style="
              border: 1px solid var(--color-background-active);
              border-radius: 4px;
              margin-left: 4px;
            "><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-menu-icon lucide-menu" style="margin-left: 4px; margin-right: 4px;"><path d="M4 5h16"></path><path d="M4 12h16"></path><path d="M4 19h16"></path></svg></a></div></header><div class="container container-main"><div class="col-content"><div class="tsd-page-title"><h1>hono-compress</h1></div><div class="tsd-panel tsd-typography"><h1 id="💎-hono-compress" class="tsd-anchor-link">💎 hono-compress<a href="#💎-hono-compress" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h1><p>Compression plugin for <a href="https://github.com/honojs/hono">Hono</a></p>
<p>Drop-in replacement of the built-in <a href="https://hono.dev/docs/middleware/builtin/compress">Compress Middleware</a>, but with extra juice! 🍋</p>
<h2 id="features" class="tsd-anchor-link">Features<a href="#features" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><ul>
<li>💯 compress content with <code>zstd</code>, <code>brotli</code>, <code>gzip</code>, <code>deflate</code></li>
<li>✨ ultra-fast and 100% type-safe</li>
<li>🚀 optimized for <a href="https://bun.sh/">Bun</a></li>
<li>🎥 streaming response support</li>
<li>🌻 automatic encoding selection</li>
<li>🎯 customizable compression level and options</li>
<li>🎱 content size threshold and custom filtering</li>
<li>🔒 double-compression protection</li>
<li>🔥 fully documented and tested</li>
<li>☕ works flawlessy on <a href="https://nodejs.org/">Node</a>, <a href="https://deno.com/">Deno</a>, <a href="https://workers.cloudflare.com/">Cloudflare Workers</a>, <a href="https://deno.com/deploy">Deno Deploy</a> and many edge runtimes</li>
</ul>
<h2 id="about" class="tsd-anchor-link">About<a href="#about" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>This project born as a fork of <a href="https://github.com/sunneydev/bun-compression">bun-compression</a>, which itself is a fork of <a href="https://github.com/gusb3ll/elysia-compression">elysia-compression</a>.</p>
<p>Both projects were broken, unmaintained and missing many of the features I was looking for, so I started with them, but ended up rewriting everything from scratch.</p>
<p>This project has been also inspired by <a href="https://github.com/honojs/hono">hono/compress</a>, <a href="https://github.com/expressjs/compression">expressjs/compression</a> and <a href="https://github.com/vermaysha/elysia-compress">elysia-compress</a>.</p>
<h2 id="installation" class="tsd-anchor-link">Installation<a href="#installation" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><details open>
<summary>Bun</summary>
<pre><code class="bash"><span class="hl-0">bun</span><span class="hl-1"> </span><span class="hl-2">add</span><span class="hl-1"> </span><span class="hl-2">hono-compress</span>
</code><button type="button">Copy</button></pre>

</details>
<details>
<summary>npm</summary>
<pre><code class="bash"><span class="hl-0">npm</span><span class="hl-1"> </span><span class="hl-2">install</span><span class="hl-1"> </span><span class="hl-2">hono-compress</span>
</code><button type="button">Copy</button></pre>

</details>
<details>
<summary>pnpm</summary>
<pre><code class="bash"><span class="hl-0">pnpm</span><span class="hl-1"> </span><span class="hl-2">add</span><span class="hl-1"> </span><span class="hl-2">hono-compress</span>
</code><button type="button">Copy</button></pre>

</details>
<details>
<summary>Yarn</summary>
<pre><code class="bash"><span class="hl-0">yarn</span><span class="hl-1"> </span><span class="hl-2">add</span><span class="hl-1"> </span><span class="hl-2">hono-compress</span>
</code><button type="button">Copy</button></pre>

</details>
<details>
<summary>Deno</summary>
<pre><code class="bash"><span class="hl-0">deno</span><span class="hl-1"> </span><span class="hl-2">add</span><span class="hl-1"> </span><span class="hl-2">hono-compress</span>
</code><button type="button">Copy</button></pre>

</details>
<h2 id="quick-start" class="tsd-anchor-link">Quick Start<a href="#quick-start" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><pre><code class="typescript"><span class="hl-3">import</span><span class="hl-1"> { </span><span class="hl-4">Hono</span><span class="hl-1"> } </span><span class="hl-3">from</span><span class="hl-1"> </span><span class="hl-2">&#39;hono&#39;</span><br/><span class="hl-3">import</span><span class="hl-1"> { </span><span class="hl-4">compress</span><span class="hl-1"> } </span><span class="hl-3">from</span><span class="hl-1"> </span><span class="hl-2">&#39;hono-compress&#39;</span><br/><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-6">app</span><span class="hl-1"> = </span><span class="hl-5">new</span><span class="hl-1"> </span><span class="hl-0">Hono</span><span class="hl-1">()</span><br/><br/><span class="hl-4">app</span><span class="hl-1">.</span><span class="hl-0">use</span><span class="hl-1">(</span><span class="hl-0">compress</span><span class="hl-1">())</span>
</code><button type="button">Copy</button></pre>

<h2 id="usage" class="tsd-anchor-link">Usage<a href="#usage" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><h3 id="" class="tsd-anchor-link"><code>compress(options: HonoCompressOptions)</code></h3><p>Creates a middleware function for compressing response content.</p>
<pre><code class="typescript"><span class="hl-0">compress</span><span class="hl-1">({</span><br/><span class="hl-1">  </span><span class="hl-4">encoding</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">encodings</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">fallback</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">force</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">strict</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">streaming</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">bun</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">node</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">threshold</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">zstdLevel</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">brotliLevel</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">gzipLevel</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">deflateLevel</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">zstdOptions</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">brotliOptions</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">gzipOptions</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">deflateOptions</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">filter</span><span class="hl-1">,</span><br/><span class="hl-1">})</span>
</code><button type="button">Copy</button></pre>

<h2 id="options" class="tsd-anchor-link">Options<a href="#options" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><h3 id="optional-encoding-" class="tsd-anchor-link"><em>(optional)</em> encoding: <code>zstd</code> | <code>br</code> | <code>gzip</code> | <code>deflate</code><a href="#optional-encoding-" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Defaults to <code>undefined</code>.</p>
<p>The encoding format to be used to compress the response content.
Can be only one of the following (sorted in descending order by performance):</p>
<ul>
<li><code>zstd</code></li>
<li><code>br</code></li>
<li><code>gzip</code></li>
<li><code>deflate</code></li>
</ul>
<p>If not defined, all the formats declared in the option <code>encodings</code> can be used.</p>
<p>This option is provided primarily to maintain compatibility with <code>hono/compress</code>, use the option <code>encodings</code> to set the wanted compression formats.</p>
<h3 id="optional-encodings" class="tsd-anchor-link"><em>(optional)</em> encodings: <code>(zstd | br | gzip | deflate)[]</code><a href="#optional-encodings" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Defaults to <code>['zstd', 'br', 'gzip', 'deflate']</code>.</p>
<p>The encoding formats allowed to be used to compress the response content.</p>
<p>The first matching the request <code>Accept-Encoding</code> header according their order of declaration is chosen to compress the response content.</p>
<h3 id="optional-fallback-" class="tsd-anchor-link"><em>(optional)</em> fallback: <code>zstd</code> | <code>br</code> | <code>gzip</code> | <code>deflate</code><a href="#optional-fallback-" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Defaults to <code>undefined</code>.</p>
<p>The encoding format to be used as fallback to compress the response content if no <code>Accept-Encoding</code> header is request by the client.
If not defined, content will not be compressed.</p>
<h3 id="optional-force" class="tsd-anchor-link"><em>(optional)</em> force: <code>boolean</code><a href="#optional-force" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Defaults to <code>false</code>.</p>
<p>Forces the content compression even if the response <code>Content-Type</code> header cannot be determined and the <code>Cache-Control</code> is set to <code>no-transform</code>.</p>
<h3 id="optional-strict" class="tsd-anchor-link"><em>(optional)</em> strict: <code>boolean</code><a href="#optional-strict" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Defaults to <code>true</code>.</p>
<p>Complies with the client request directives.
Disables the content compression if match the <code>x-no-compression</code> header.</p>
<h3 id="optional-streaming" class="tsd-anchor-link"><em>(optional)</em> streaming: <code>boolean</code><a href="#optional-streaming" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Defaults to <code>true</code>.</p>
<p>Streams compressed content in chunked response.</p>
<p>Can be set to <code>undefined</code> to automatically detect when disable streaming compression.
Enabled by default to always streaming content.</p>
<h3 id="optional-bun" class="tsd-anchor-link"><em>(optional)</em> bun: <code>boolean</code><a href="#optional-bun" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Defaults to <code>true</code>.</p>
<p>Allows Bun stream compressor to be used if available.</p>
<h3 id="optional-node" class="tsd-anchor-link"><em>(optional)</em> node: <code>boolean</code><a href="#optional-node" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Defaults to <code>true</code>.</p>
<p>Allows Node stream compressor to be used if available.</p>
<h3 id="optional-threshold" class="tsd-anchor-link"><em>(optional)</em> threshold: <code>number</code><a href="#optional-threshold" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Defaults to <code>1024</code>.</p>
<p>The minimum size in bytes for a response content to be compressed.</p>
<h3 id="optional-zstdlevel" class="tsd-anchor-link"><em>(optional)</em> zstdLevel: <code>number</code><a href="#optional-zstdlevel" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Defaults to <code>2</code>, min <code>1</code>, max <code>22</code>.</p>
<p>Zstandard algorithm compression level (format <code>zstd</code>).</p>
<h3 id="optional-brotlilevel" class="tsd-anchor-link"><em>(optional)</em> brotliLevel: <code>number</code><a href="#optional-brotlilevel" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Defaults to <code>4</code>, min <code>0</code>, max <code>11</code>.</p>
<p>Brotli algorithm compression level (format <code>br</code>).</p>
<h3 id="optional-gziplevel" class="tsd-anchor-link"><em>(optional)</em> gzipLevel: <code>number</code><a href="#optional-gziplevel" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Defaults to <code>6</code>, min <code>0</code>, max <code>6</code>.</p>
<p>Gzip algorithm compression level (format <code>gzip</code>).</p>
<h3 id="optional-deflatelevel" class="tsd-anchor-link"><em>(optional)</em> deflateLevel: <code>number</code><a href="#optional-deflatelevel" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Defaults to <code>6</code>, min <code>0</code>, max <code>6</code>.</p>
<p>Deflate algorithm compression level (format <code>deflate</code>).</p>
<h3 id="optional-zstdoptions" class="tsd-anchor-link"><em>(optional)</em> zstdOptions: <code>number</code><a href="#optional-zstdoptions" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Defaults to <code>undefined</code>.</p>
<p>Zstandard algorithm compression options (format <code>zstd</code>).</p>
<p>Refer to the zstd <a href="https://facebook.github.io/zstd/zstd_manual.html">manual</a> for more details.</p>
<h3 id="optional-brotlioptions" class="tsd-anchor-link"><em>(optional)</em> brotliOptions: <code>object</code><a href="#optional-brotlioptions" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Defaults to <code>undefined</code>.</p>
<p>Brotli algorithm compression options (format <code>br</code>).</p>
<p>Refer to the Brotli <a href="https://www.ietf.org/rfc/rfc7932.txt">specification</a> for more details.</p>
<h3 id="optional-gzipoptions" class="tsd-anchor-link"><em>(optional)</em> gzipOptions: <code>object</code><a href="#optional-gzipoptions" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Defaults to <code>undefined</code>.</p>
<p>Gzip algorithm compression options (format <code>gzip</code>).</p>
<p>Refer to the zlib <a href="https://zlib.net/manual.html">manual</a> for more details.</p>
<h3 id="optional-deflateoptions" class="tsd-anchor-link"><em>(optional)</em> deflateOptions: <code>object</code><a href="#optional-deflateoptions" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Defaults to <code>undefined</code>.</p>
<p>Deflate algorithm compression options (format <code>deflate</code>).</p>
<p>Refer to the zlib <a href="https://zlib.net/manual.html">manual</a> for more details.</p>
<h3 id="optional-filter" class="tsd-anchor-link"><em>(optional)</em> filter: <code>function</code><a href="#optional-filter" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Defaults to <code>undefined</code>.</p>
<p>Optional function callback used to check if the response content should be compressed or not.</p>
<p>Overrides all the internal checks. Use with caution.</p>
<h4 id="parameters" class="tsd-anchor-link">Parameters<a href="#parameters" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h4><ul>
<li><a href="https://hono.dev/docs/api/context">Hono Context</a></li>
</ul>
<h4 id="return-value" class="tsd-anchor-link">Return value<a href="#return-value" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h4><p>Boolean</p>
<h4 id="example" class="tsd-anchor-link">Example<a href="#example" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h4><p>Force the response content to be always compressed:</p>
<pre><code class="typescript"><span class="hl-3">import</span><span class="hl-1"> </span><span class="hl-3">type</span><span class="hl-1"> { </span><span class="hl-4">Context</span><span class="hl-1"> } </span><span class="hl-3">from</span><span class="hl-1"> </span><span class="hl-2">&#39;hono&#39;</span><br/><br/><span class="hl-0">compress</span><span class="hl-1">({</span><br/><span class="hl-1">  </span><span class="hl-0">filter</span><span class="hl-4">:</span><span class="hl-1"> (</span><span class="hl-4">c</span><span class="hl-1">: </span><span class="hl-7">Context</span><span class="hl-1">) </span><span class="hl-5">=&gt;</span><span class="hl-1"> </span><span class="hl-5">true</span><span class="hl-1">,</span><br/><span class="hl-1">})</span>
</code><button type="button">Copy</button></pre>

<h2 id="api-reference" class="tsd-anchor-link">API Reference<a href="#api-reference" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><h3 id="constants" class="tsd-anchor-link">Constants<a href="#constants" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><pre><code class="typescript"><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-6">ACCEPTED_ENCODINGS</span><span class="hl-1"> = [</span><span class="hl-2">&#39;zstd&#39;</span><span class="hl-1">, </span><span class="hl-2">&#39;br&#39;</span><span class="hl-1">, </span><span class="hl-2">&#39;gzip&#39;</span><span class="hl-1">, </span><span class="hl-2">&#39;deflate&#39;</span><span class="hl-1">] </span><span class="hl-3">as</span><span class="hl-1"> </span><span class="hl-5">const</span><br/><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-6">ZSTD_DEFAULT_LEVEL</span><span class="hl-1"> = </span><span class="hl-8">2</span><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-6">ZSTD_MIN_LEVEL</span><span class="hl-1"> = </span><span class="hl-8">1</span><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-6">ZSTD_MAX_LEVEL</span><span class="hl-1"> = </span><span class="hl-8">22</span><br/><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-6">BROTLI_DEFAULT_LEVEL</span><span class="hl-1"> = </span><span class="hl-8">4</span><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-6">BROTLI_MIN_LEVEL</span><span class="hl-1"> = </span><span class="hl-8">0</span><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-6">BROTLI_MAX_LEVEL</span><span class="hl-1"> = </span><span class="hl-8">11</span><br/><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-6">ZLIB_DEFAULT_LEVEL</span><span class="hl-1"> = </span><span class="hl-8">6</span><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-6">ZLIB_MIN_LEVEL</span><span class="hl-1"> = </span><span class="hl-8">0</span><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-6">ZLIB_MAX_LEVEL</span><span class="hl-1"> = </span><span class="hl-8">9</span>
</code><button type="button">Copy</button></pre>

<h3 id="types" class="tsd-anchor-link">Types<a href="#types" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><pre><code class="typescript"><span class="hl-5">type</span><span class="hl-1"> </span><span class="hl-7">ZstdLevel</span><span class="hl-1"> = </span><span class="hl-7">IntClosedRange</span><span class="hl-1">&lt;</span><span class="hl-5">typeof</span><span class="hl-1"> </span><span class="hl-6">ZSTD_MIN_LEVEL</span><span class="hl-1">, </span><span class="hl-5">typeof</span><span class="hl-1"> </span><span class="hl-6">ZSTD_MAX_LEVEL</span><span class="hl-1">&gt;</span><br/><span class="hl-5">type</span><span class="hl-1"> </span><span class="hl-7">BrotliLevel</span><span class="hl-1"> = </span><span class="hl-7">IntClosedRange</span><span class="hl-1">&lt;</span><span class="hl-5">typeof</span><span class="hl-1"> </span><span class="hl-6">BROTLI_MIN_LEVEL</span><span class="hl-1">, </span><span class="hl-5">typeof</span><span class="hl-1"> </span><span class="hl-6">BROTLI_MAX_LEVEL</span><span class="hl-1">&gt;</span><br/><span class="hl-5">type</span><span class="hl-1"> </span><span class="hl-7">ZlibLevel</span><span class="hl-1"> = </span><span class="hl-7">IntClosedRange</span><span class="hl-1">&lt;</span><span class="hl-5">typeof</span><span class="hl-1"> </span><span class="hl-6">ZLIB_MIN_LEVEL</span><span class="hl-1">, </span><span class="hl-5">typeof</span><span class="hl-1"> </span><span class="hl-6">ZLIB_MAX_LEVEL</span><span class="hl-1">&gt;</span><br/><br/><span class="hl-5">type</span><span class="hl-1"> </span><span class="hl-7">ZstdOptions</span><span class="hl-1"> = </span><span class="hl-7">BunZstdOptions</span><span class="hl-1"> | </span><span class="hl-7">NodeZstdOptions</span><br/><span class="hl-5">type</span><span class="hl-1"> </span><span class="hl-7">BrotliOptions</span><span class="hl-1"> = </span><span class="hl-7">NodeBrotliOptions</span><br/><span class="hl-5">type</span><span class="hl-1"> </span><span class="hl-7">ZlibOptions</span><span class="hl-1"> = </span><span class="hl-7">BunZlibOptions</span><span class="hl-1"> | </span><span class="hl-7">NodeZlibOptions</span><br/><br/><span class="hl-5">type</span><span class="hl-1"> </span><span class="hl-7">CompressionEncoding</span><span class="hl-1"> = (</span><span class="hl-5">typeof</span><span class="hl-1"> </span><span class="hl-6">ACCEPTED_ENCODINGS</span><span class="hl-1">)[</span><span class="hl-7">number</span><span class="hl-1">]</span><br/><span class="hl-5">type</span><span class="hl-1"> </span><span class="hl-7">CompressionCallback</span><span class="hl-1"> = (</span><span class="hl-4">c</span><span class="hl-1">: </span><span class="hl-7">Context</span><span class="hl-1">) </span><span class="hl-5">=&gt;</span><span class="hl-1"> </span><span class="hl-7">boolean</span><br/><br/><span class="hl-5">interface</span><span class="hl-1"> </span><span class="hl-7">HonoCompressOptions</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-4">encoding</span><span class="hl-1">?: </span><span class="hl-7">CompressionEncoding</span><br/><span class="hl-1">  </span><span class="hl-4">encodings</span><span class="hl-1">?: </span><span class="hl-7">CompressionEncoding</span><span class="hl-1">[]</span><br/><span class="hl-1">  </span><span class="hl-4">fallback</span><span class="hl-1">?: </span><span class="hl-7">CompressionEncoding</span><br/><span class="hl-1">  </span><span class="hl-4">force</span><span class="hl-1">?: </span><span class="hl-7">boolean</span><br/><span class="hl-1">  </span><span class="hl-4">strict</span><span class="hl-1">?: </span><span class="hl-7">boolean</span><br/><span class="hl-1">  </span><span class="hl-4">streaming</span><span class="hl-1">?: </span><span class="hl-7">boolean</span><br/><span class="hl-1">  </span><span class="hl-4">bun</span><span class="hl-1">?: </span><span class="hl-7">boolean</span><br/><span class="hl-1">  </span><span class="hl-4">node</span><span class="hl-1">?: </span><span class="hl-7">boolean</span><br/><span class="hl-1">  </span><span class="hl-4">threshold</span><span class="hl-1">?: </span><span class="hl-7">number</span><br/><span class="hl-1">  </span><span class="hl-4">zstdLevel</span><span class="hl-1">?: </span><span class="hl-7">ZstdLevel</span><br/><span class="hl-1">  </span><span class="hl-4">zstdOptions</span><span class="hl-1">?: </span><span class="hl-7">ZstdOptions</span><br/><span class="hl-1">  </span><span class="hl-4">brotliLevel</span><span class="hl-1">?: </span><span class="hl-7">BrotliLevel</span><br/><span class="hl-1">  </span><span class="hl-4">brotliOptions</span><span class="hl-1">?: </span><span class="hl-7">BrotliOptions</span><br/><span class="hl-1">  </span><span class="hl-4">gzipLevel</span><span class="hl-1">?: </span><span class="hl-7">ZlibLevel</span><br/><span class="hl-1">  </span><span class="hl-4">gzipOptions</span><span class="hl-1">?: </span><span class="hl-7">ZlibOptions</span><br/><span class="hl-1">  </span><span class="hl-4">deflateLevel</span><span class="hl-1">?: </span><span class="hl-7">ZlibLevel</span><br/><span class="hl-1">  </span><span class="hl-4">deflateOptions</span><span class="hl-1">?: </span><span class="hl-7">ZlibOptions</span><br/><span class="hl-1">  </span><span class="hl-4">filter</span><span class="hl-1">?: </span><span class="hl-7">CompressionCallback</span><br/><span class="hl-1">}</span>
</code><button type="button">Copy</button></pre>

</div></div><div class="col-sidebar"><div class="page-menu"><div class="tsd-page-navigation"><a href="#💎-hono-compress"><span>💎 hono-<wbr/>compress</span></a><ul><li><a href="#features"><span>Features</span></a></li><li><a href="#about"><span>About</span></a></li><li><a href="#installation"><span>Installation</span></a></li><li><a href="#quick-start"><span>Quick <wbr/>Start</span></a></li><li><a href="#usage"><span>Usage</span></a></li><li><ul><li><a href="#"><span></span></a></li></ul></li><li><a href="#options"><span>Options</span></a></li><li><ul><li><a href="#optional-encoding-"><span>(optional) encoding:  |  |  | </span></a></li><li><a href="#optional-encodings"><span>(optional) encodings: </span></a></li><li><a href="#optional-fallback-"><span>(optional) fallback:  |  |  | </span></a></li><li><a href="#optional-force"><span>(optional) force: </span></a></li><li><a href="#optional-strict"><span>(optional) strict: </span></a></li><li><a href="#optional-streaming"><span>(optional) streaming: </span></a></li><li><a href="#optional-bun"><span>(optional) bun: </span></a></li><li><a href="#optional-node"><span>(optional) node: </span></a></li><li><a href="#optional-threshold"><span>(optional) threshold: </span></a></li><li><a href="#optional-zstdlevel"><span>(optional) zstd<wbr/>Level: </span></a></li><li><a href="#optional-brotlilevel"><span>(optional) brotli<wbr/>Level: </span></a></li><li><a href="#optional-gziplevel"><span>(optional) gzip<wbr/>Level: </span></a></li><li><a href="#optional-deflatelevel"><span>(optional) deflate<wbr/>Level: </span></a></li><li><a href="#optional-zstdoptions"><span>(optional) zstd<wbr/>Options: </span></a></li><li><a href="#optional-brotlioptions"><span>(optional) brotli<wbr/>Options: </span></a></li><li><a href="#optional-gzipoptions"><span>(optional) gzip<wbr/>Options: </span></a></li><li><a href="#optional-deflateoptions"><span>(optional) deflate<wbr/>Options: </span></a></li><li><a href="#optional-filter"><span>(optional) filter: </span></a></li><li><ul><li><a href="#parameters"><span>Parameters</span></a></li><li><a href="#return-value"><span>Return value</span></a></li><li><a href="#example"><span>Example</span></a></li></ul></li></ul></li><li><a href="#api-reference"><span>API <wbr/>Reference</span></a></li><li><ul><li><a href="#constants"><span>Constants</span></a></li><li><a href="#types"><span>Types</span></a></li></ul></li></ul></div></div><div class="site-menu"><nav class="tsd-navigation"><a href="modules.html">hono-compress</a><ul class="tsd-small-nested-navigation" id="tsd-nav-container"><li>Loading...</li></ul></nav></div></div></div><div class="overlay"></div></body></html>
